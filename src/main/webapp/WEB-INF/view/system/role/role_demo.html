@layout("/common/_curd/_container.html"){
<!-- PAGE CONTENT BEGINS -->
<form class="form-horizontal" role="form">
	<div class="space-4"></div>
	<!-- #section:elements.form -->
	<div class="form-group">
		<label class="col-sm-2 control-label no-padding-right" > 新增分组 </label>

		<div class="col-sm-3">
			<input type="text" placeholder="请输入账户" class="form-control" />
			<input type="button" id="add" class="button" style="margin-top: 3px" onclick="grouping(this)" value="添加">
		</div>
	</div>

	<div class="form-group" >
		<label class="col-sm-2 control-label no-padding-right">分组字段</label>
		<div class="col-sm-3" id="group" >
			@for(){
			<div class='col-sm-3 input-group' style='float:left;background: #666;color: white;position: relative;font-size: 15px;width: auto;text-indent: 10px;margin:0 5px 5px 0'>val;
				<span class='o_close' data-percent='' onclick='doDelete(this)' style='cursor: pointer;color: #ccc;margin: 0 5px auto'>x</span>
				<input type='hidden' name='DEMO.GROUP' value='" + val + "'>
			</div>
			@}
		</div>
	</div>
	<div class="clearfix form-actions center" style="margin-top:15px;margin-bottom:5px;">
		<div class="col-md-offset-1 col-md-10">
			<button class="btn btn-info" type="submit" id="btn_save">
				<i class="ace-icon fa fa-check bigger-110"></i>
				新增
			</button>

			&nbsp; &nbsp; &nbsp;
			<button class="btn" type="button" id="btn_close">
				<i class="ace-icon fa fa-close bigger-110"></i>
				关闭
			</button>
		</div>
	</div>
	<script src="${basePath}/static/laydate/laydate.js"></script>
	<script type="text/javascript">
		function grouping(data){
			var val = $(data).parent().find("input").eq(0).val();
			if(val==""){
				alert("不能为空");
				return;
			}

			var i=0;
			$("#group div").each(function(){
				i++;
			});
			if(i==10){
				alert("最多只能有十个标签");
				return;
			}

			var html = "";
			html += "<div class='col-sm-3 input-group' style='float:left;background: #666;color: white;position: relative;font-size: 15px;width: auto;text-indent: 10px;margin:0 5px 5px 0'>" + val;
			html += "	<span class='o_close' data-percent='' onclick='doDelete(this)' style='cursor: pointer;color: #ccc;margin: 0 5px auto'>x</span>	";
			html += "	<input type='hidden' name='DEMO.GROUP' value='" + val + "'> 	";
			html += "</div>   ";
			$(data).parent().find("input").eq(0).val("");
			$("#group").append(html);

		}

		function doDelete(btn) {
			$(btn).parent().remove();
		}

		$("#btn_save").on("click",function(){
			var vals = [];
			$("#group [name='DEMO.GROUP']").each(function(){
				var val = $(this).val();
				vals.push(val);
			});

			console.log(vals);

			$.post("${basePath}/${code}/demo_save", { vals: JSON.stringify(vals) }, function (data) {
				if (data.code === 0) {
					layer_alert(data.message, "success");
				}
				else {
					layer_post(data);
				}
			}, "json");
			return;
		})

	</script>

	<div class="space-4"></div>
</form>
@}
